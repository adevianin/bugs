{% extends 'base.html' %}
{% load i18n %}
{% load hashed_static %}

{% block meta %}
    <meta name="referrer" content="no-referrer">
{% endblock %}

{% block title %}
    {% trans "Password Recovery" %}
{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% hashed_static 'initialStylesResetPasswordApp.css' %}">
{% endblock %}

{% block javascript %}
    <script src="{% hashed_static 'resetPasswordApp.js' %}"></script>
{% endblock %}

{% block content %}
    {% if is_request_mode %}
        <div data-request-mode>
            <div data-request-creating-tab>
                <h2>
                    {% trans "Password recovery request" %}
                </h2>
                <p>
                    {% trans "Enter your email to receive instructions for password recovery." %}
                </p>
                <div>
                    <input type="email" placeholder="{% trans "email" %}" data-email />
                    <div class="g-error-container" data-email-err></div>
                </div>
                <div class="g-error-container" data-request-err></div>
                <div>
                    <button data-send>{% trans "send" context "pass recovery send btn" %}</button>
                    <div class="g-hidden" data-loader></div>
                    <a href="{% url 'account_index' %}">{% trans "back to sign in" %}</a>
                </div>
            </div>
            <div class="g-hidden" data-request-done-tab>
                <h2>{% trans "Check your email." %}</h2>
                <p>{% trans "If specified email address is registered with the system, we have sent instructions to reset your password. If your account was created through Google, use the Google sign-in feature." %}</p>
            </div>
        </div>
    {% elif is_set_password_mode %}
        <div data-set-password-mode>
            <div data-set-password-tab>
                <h2>
                    {% trans "Setting password" %}
                </h2>
                <p>
                    {% trans "Set a new password and never forget it again." %}
                </p>
                <div>
                    <label>{% trans "New password:" %}</label>
                    <input type="password" data-password />
                    <div class="g-error-container" data-password-err></div>
                </div>
                <div>
                    <label>{% trans "Password confirmation:" %}</label>
                    <input type="password" data-password-confirmation />
                    <div class="g-error-container" data-password-confirmation-err></div>
                </div>
                <div class="g-error-container" data-request-err></div>
                <div>
                    <button data-set-password-btn>{% trans "set password" %}</button>
                    <div class="g-hidden" data-loader></div>
                </div>
            </div>
            <div class="g-hidden" data-setted-password-tab>
                <p>{% trans "New password successfully set." %}</p>
                <a href="{% url 'account_index' %}">{% trans "back to sign in" %}</a>
            </div>
        </div>
    {% endif %}

{% endblock %}
